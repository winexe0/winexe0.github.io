<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Upcycled Cloud | Research Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts: Space Mono for data/code, Inter for body text -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'hazard': '#F4E603',
                        'carbon': '#111111',
                        'paper': '#F9FAFB',
                    },
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                        'mono': ['Space Mono', 'monospace'],
                    }
                }
            }
        }
    </script>
    <style>
        .scroller::-webkit-scrollbar { width: 8px; }
        .scroller::-webkit-scrollbar-track { background: #f1f1f1; }
        .scroller::-webkit-scrollbar-thumb { background: #111; border-radius: 4px; }
        .chart-container { position: relative; width: 100%; height: 300px; max-height: 400px; }
        /* Syntax highlighting simulation */
        .code-keyword { color: #c678dd; }
        .code-string { color: #98c379; }
        .code-comment { color: #5c6370; font-style: italic; }
        .code-func { color: #61afef; }
    </style>
</head>
<body class="bg-paper text-carbon font-sans antialiased selection:bg-hazard selection:text-carbon">

<!-- HEADER -->
<header class="w-full border-b-4 border-carbon bg-white sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
        <div class="flex items-center gap-3">
            <div class="bg-carbon text-hazard px-2 py-1 font-mono font-bold text-xl -rotate-2 border-2 border-transparent hover:border-hazard transition-all cursor-default">
                UPCYCLED_CLOUD
            </div>
            <span class="hidden md:inline-block text-xs font-bold tracking-widest uppercase text-gray-500 border-l-2 border-gray-300 pl-3">
                    Student Research Initiative
                </span>
        </div>
        <nav class="hidden md:flex gap-8 font-bold text-sm uppercase tracking-wide">
            <a href="#data" class="hover:text-blue-600 hover:underline decoration-hazard decoration-4 underline-offset-4 transition-all">Pilot Data</a>
            <a href="#methodology" class="hover:text-blue-600 hover:underline decoration-hazard decoration-4 underline-offset-4 transition-all">Methodology</a>
            <a href="#hardware" class="hover:text-blue-600 hover:underline decoration-hazard decoration-4 underline-offset-4 transition-all">Hardware</a>
            <a href="#timeline" class="hover:text-blue-600 hover:underline decoration-hazard decoration-4 underline-offset-4 transition-all">Timeline</a>
        </nav>
        <div class="flex gap-4">
            <a href="https://github.com/winexe0" target="_blank" class="hidden lg:flex items-center gap-2 text-sm font-bold text-gray-600 hover:text-carbon">
                <i class="fab fa-github text-lg"></i> Source
            </a>
            <button onclick="document.getElementById('hardware').scrollIntoView()" class="bg-hazard text-carbon px-6 py-2 font-bold shadow-[4px_4px_0px_0px_rgba(17,17,17,1)] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(17,17,17,1)] transition-all border-2 border-carbon">
                DONATE DEVICE
            </button>
        </div>
    </div>
</header>

<main class="max-w-7xl mx-auto px-4 py-12 space-y-24">

    <!-- INTRO HERO -->
    <section class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
        <div class="space-y-6">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-xs font-bold uppercase tracking-wider">
                <span class="w-2 h-2 rounded-full bg-blue-600 animate-pulse"></span>
                Pilot Study Active
            </div>
            <h1 class="text-5xl md:text-7xl font-extrabold leading-tight tracking-tight">
                EDGE AI ON <br>
                <span class="bg-hazard px-2">REFURBISHED</span> <br>
                HARDWARE.
            </h1>
            <p class="text-lg text-gray-600 max-w-md leading-relaxed border-l-4 border-hazard pl-4">
                Quantifying the carbon offset of running modern Large Language Models on "obsolete" smartphones. A sustainable alternative to the cloud.
            </p>
            <div class="flex gap-4 pt-4">
                <div class="text-center">
                    <div class="text-3xl font-black font-mono">1.1B</div>
                    <div class="text-xs uppercase text-gray-500 font-bold">Parameters</div>
                </div>
                <div class="w-px bg-gray-300 h-10"></div>
                <div class="text-center">
                    <div class="text-3xl font-black font-mono">2016</div>
                    <div class="text-xs uppercase text-gray-500 font-bold">Hardware</div>
                </div>
                <div class="w-px bg-gray-300 h-10"></div>
                <div class="text-center">
                    <div class="text-3xl font-black font-mono">0$</div>
                    <div class="text-xs uppercase text-gray-500 font-bold">Cost</div>
                </div>
            </div>
        </div>

        <!-- TERMINAL SIMULATION -->
        <div class="w-full bg-carbon rounded-lg shadow-xl overflow-hidden border-2 border-gray-800">
            <div class="bg-gray-800 px-4 py-2 flex gap-2 items-center">
                <div class="w-3 h-3 rounded-full bg-red-500"></div>
                <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                <div class="w-3 h-3 rounded-full bg-green-500"></div>
                <div class="ml-4 font-mono text-xs text-gray-400">root@moto-g5-plus:~</div>
            </div>
            <div id="terminal-body" class="p-6 font-mono text-sm text-green-400 h-[300px] overflow-y-auto leading-relaxed">
                <!-- JS will populate this -->
            </div>
        </div>
    </section>

    <!-- PILOT DATA -->
    <section id="data" class="scroll-mt-24">
        <div class="mb-8">
            <h2 class="text-3xl font-black uppercase mb-2 flex items-center gap-3">
                <i class="fas fa-chart-line text-hazard bg-carbon p-2 rounded"></i>
                Pilot Data Visualization
            </h2>
            <p class="text-gray-600 max-w-2xl">
                Data collected from the <strong>Eco-Logger Script</strong> running on a Moto G5 Plus (2016).
                This visualization displays the battery discharge curve and thermal stability under a 'Wake Lock' state, establishing the idle baseline.
            </p>
        </div>

        <div class="bg-white border-2 border-gray-200 rounded-xl shadow-sm p-6">
            <div class="flex flex-wrap gap-4 mb-6">
                <button onclick="updateChart('battery')" class="chart-btn active px-4 py-2 rounded-lg font-bold text-sm transition-colors border-2 border-carbon bg-carbon text-white">
                    <i class="fas fa-battery-half mr-2"></i> Battery Drain
                </button>
                <button onclick="updateChart('power')" class="chart-btn px-4 py-2 rounded-lg font-bold text-sm transition-colors border-2 border-gray-200 hover:border-carbon text-gray-600 hover:text-carbon">
                    <i class="fas fa-bolt mr-2"></i> Power (Watts)
                </button>
                <button onclick="updateChart('temp')" class="chart-btn px-4 py-2 rounded-lg font-bold text-sm transition-colors border-2 border-gray-200 hover:border-carbon text-gray-600 hover:text-carbon">
                    <i class="fas fa-thermometer-half mr-2"></i> Temperature
                </button>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2">
                    <div class="chart-container bg-gray-50 rounded border border-gray-100">
                        <canvas id="researchChart"></canvas>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg">
                        <div class="text-xs font-bold text-blue-400 uppercase mb-1">Total Duration</div>
                        <div class="text-2xl font-mono font-bold text-blue-900">1.40 Hours</div>
                        <div class="text-xs text-blue-700 mt-1">Samples: 5,022</div>
                    </div>
                    <div class="p-4 bg-yellow-50 border-l-4 border-hazard rounded-r-lg">
                        <div class="text-xs font-bold text-yellow-600 uppercase mb-1">Avg Idle Power</div>
                        <div class="text-2xl font-mono font-bold text-carbon">0.28 Watts</div>
                        <div class="text-xs text-gray-600 mt-1">Calculated Baseline</div>
                    </div>
                    <div class="p-4 bg-gray-50 border-l-4 border-gray-500 rounded-r-lg">
                        <div class="text-xs font-bold text-gray-500 uppercase mb-1">Discharge Rate</div>
                        <div class="text-2xl font-mono font-bold text-gray-800">~12% / Hour</div>
                        <div class="text-xs text-gray-600 mt-1">Wake Lock: ON (High Drain)</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- DISCOVERY / FINDINGS -->
    <section id="discovery" class="scroll-mt-24">
        <div class="bg-carbon text-white rounded-xl overflow-hidden shadow-2xl">
            <div class="grid grid-cols-1 md:grid-cols-2">
                <div class="p-8 md:p-12 flex flex-col justify-center border-b md:border-b-0 md:border-r border-gray-800">
                    <div class="inline-block bg-red-600 text-white text-xs font-bold px-2 py-1 mb-4 w-fit rounded">CRITICAL FINDING</div>
                    <h2 class="text-3xl font-display font-bold mb-4">The "Hallucination" Bug</h2>
                    <p class="text-gray-400 mb-6 leading-relaxed">
                        During the pilot study on the Moto G5 Plus, modern "K-Quant" models failed, producing gibberish output. Investigation revealed a hardware constraint in pre-2017 processors.
                    </p>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-start gap-3">
                            <i class="fas fa-times-circle text-red-500 mt-1"></i>
                            <div>
                                <span class="font-bold text-white">Issue:</span>
                                <span class="text-gray-400 text-sm">Snapdragon 625 (ARMv8.0) lacks <code class="bg-gray-800 px-1 rounded text-red-300">dotprod</code> instructions.</span>
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <i class="fas fa-microchip text-yellow-500 mt-1"></i>
                            <div>
                                <span class="font-bold text-white">Result:</span>
                                <span class="text-gray-400 text-sm">Emulation fallbacks caused floating-point rounding errors -> Model Hallucination.</span>
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <i class="fas fa-check-circle text-green-500 mt-1"></i>
                            <div>
                                <span class="font-bold text-white">Fix:</span>
                                <span class="text-gray-400 text-sm">Standardized on legacy <strong>Q4_0 Quantization</strong> for all e-waste hardware.</span>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="bg-gray-900 p-8 flex flex-col gap-4 overflow-y-auto scroller h-96 md:h-auto">
                    <div class="font-mono text-xs text-gray-500 uppercase font-bold mb-2">Simulation: Output Comparison</div>
                    <div class="bg-red-900/20 border border-red-500/30 p-4 rounded hover:bg-red-900/30 transition-colors cursor-crosshair group">
                        <div class="flex justify-between text-xs mb-2">
                            <span class="text-red-400 font-bold">ARMv8.0 (K-Quant)</span>
                            <span class="text-red-400"><i class="fas fa-exclamation-triangle"></i> Failed</span>
                        </div>
                        <p class="font-mono text-sm text-red-200 opacity-80 group-hover:opacity-100">
                            User: "Hello"<br>
                            AI: "65.625 63.5 55.375 <|im_end|> ... [Looping Error]"
                        </p>
                    </div>
                    <div class="bg-green-900/20 border border-green-500/30 p-4 rounded hover:bg-green-900/30 transition-colors cursor-crosshair group">
                        <div class="flex justify-between text-xs mb-2">
                            <span class="text-green-400 font-bold">ARMv8.0 (Legacy Q4_0)</span>
                            <span class="text-green-400"><i class="fas fa-check"></i> Stable</span>
                        </div>
                        <p class="font-mono text-sm text-green-200 opacity-80 group-hover:opacity-100">
                            User: "Hello"<br>
                            AI: "Hello! How can I help you today?"
                        </p>
                    </div>
                    <div class="mt-auto text-center">
                        <p class="text-xs text-gray-500 italic">This finding dictates our donation acceptance criteria.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- OPEN SOURCE METHODOLOGY (INTEGRATED) -->
    <section id="methodology" class="scroll-mt-24">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
            <div>
                <h2 class="text-3xl font-black uppercase mb-4 flex items-center gap-3">
                    <i class="fas fa-code text-hazard bg-carbon p-2 rounded"></i>
                    Open Source Stack
                </h2>
                <p class="text-gray-600 mb-6">
                    We believe in transparent science. The entire experimentation stack runs on open-source software (Termux, Llama.cpp, Python). Here are the core scripts powering the "Upcycled Cloud."
                </p>

                <div class="bg-white border-2 border-gray-200 rounded-xl p-6 shadow-sm mb-6">
                    <h3 class="font-bold text-lg mb-2">Research Questions</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li><strong>RQ1:</strong> Can 2016-era smartphones run modern LLMs without hallucination?</li>
                        <li><strong>RQ2:</strong> What is the Joules-per-Token efficiency compared to Cloud APIs?</li>
                        <li><strong>RQ3:</strong> Does the "Right to Repair" offset the carbon cost of manufacturing new AI chips?</li>
                    </ul>
                </div>
            </div>

            <div class="space-y-4">
                <!-- Code Block 1 -->
                <div class="bg-[#282c34] rounded-lg overflow-hidden border border-gray-700 shadow-lg">
                    <div class="bg-[#21252b] px-4 py-2 flex justify-between items-center">
                        <span class="text-xs font-mono text-gray-400">eco_logger.py</span>
                        <span class="text-xs font-mono text-gray-500">Python 3</span>
                    </div>
                    <div class="p-4 font-mono text-xs overflow-x-auto text-gray-300">
<pre><code><span class="code-keyword">import</span> time
<span class="code-keyword">import</span> os

<span class="code-comment"># Access Kernel Power Nodes directly</span>
BATTERY_PATH = <span class="code-string">"/sys/class/power_supply/battery"</span>

<span class="code-keyword">while</span> True:
    <span class="code-keyword">with</span> open(f<span class="code-string">"{BATTERY_PATH}/current_now"</span>, <span class="code-string">"r"</span>) <span class="code-keyword">as</span> f:
        current = f.read().strip() <span class="code-comment"># Microamps</span>
    <span class="code-keyword">with</span> open(f<span class="code-string">"{BATTERY_PATH}/voltage_now"</span>, <span class="code-string">"r"</span>) <span class="code-keyword">as</span> f:
        voltage = f.read().strip() <span class="code-comment"># Microvolts</span>

    <span class="code-func">print</span>(f<span class="code-string">"{time.time()},{current},{voltage}"</span>)
    time.sleep(1)</code></pre>
                    </div>
                </div>

                <!-- Code Block 2 -->
                <div class="bg-[#282c34] rounded-lg overflow-hidden border border-gray-700 shadow-lg">
                    <div class="bg-[#21252b] px-4 py-2 flex justify-between items-center">
                        <span class="text-xs font-mono text-gray-400">build_legacy.sh</span>
                        <span class="text-xs font-mono text-gray-500">Bash</span>
                    </div>
                    <div class="p-4 font-mono text-xs overflow-x-auto text-gray-300">
<pre><code><span class="code-comment"># CMake flags for Snapdragon 625 (ARMv8.0)</span>
cmake .. -G Ninja \
    -DGGML_OPENCL=OFF \
    -DCMAKE_C_FLAGS=<span class="code-string">"-O3 -march=armv8-a"</span> \
    -DCMAKE_CXX_FLAGS=<span class="code-string">"-O3 -march=armv8-a"</span> \
    -DGGML_NATIVE=OFF</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- HARDWARE TIER LIST -->
    <section id="hardware" class="scroll-mt-24">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-black uppercase mb-4">Project Hardware Guide</h2>
            <p class="text-gray-600 max-w-xl mx-auto">We categorize donated devices into tiers based on their ability to run modern AI vs. legacy configurations.</p>
        </div>

        <div class="flex justify-center gap-4 mb-8" id="tier-filters">
            <button data-filter="all" class="filter-btn active bg-carbon text-white px-4 py-2 rounded-full font-bold text-sm border-2 border-carbon">All</button>
            <button data-filter="tier-a" class="filter-btn bg-white text-gray-600 px-4 py-2 rounded-full font-bold text-sm border-2 border-gray-200 hover:border-green-500">Tier A (Ideal)</button>
            <button data-filter="tier-b" class="filter-btn bg-white text-gray-600 px-4 py-2 rounded-full font-bold text-sm border-2 border-gray-200 hover:border-yellow-500">Tier B (Good)</button>
            <button data-filter="tier-c" class="filter-btn bg-white text-gray-600 px-4 py-2 rounded-full font-bold text-sm border-2 border-gray-200 hover:border-red-500">Tier C (Legacy)</button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="phone-grid">
            <!-- JS Populated -->
        </div>
    </section>

    <!-- THE DEAL & TIMELINE -->
    <section id="timeline" class="bg-hazard p-8 md:p-12 rounded-3xl shadow-hard border-4 border-carbon mb-12">
        <div class="flex flex-col lg:flex-row gap-12">
            <div class="lg:w-1/3">
                <h2 class="text-4xl font-black mb-6 text-carbon">THE DEAL</h2>
                <div class="bg-white p-6 rounded-xl border-2 border-carbon shadow-sm relative overflow-hidden">
                    <div class="flex items-center gap-4 mb-4">
                        <div class="bg-carbon text-white w-12 h-12 flex items-center justify-center rounded-full text-xl">
                            <i class="fas fa-wrench"></i>
                        </div>
                        <h3 class="font-bold text-xl">Free Repair</h3>
                    </div>
                    <p class="text-gray-700 mb-6">
                        If you donate one of the first 10 phones, we will fix the screen/battery to run our tests.
                    </p>
                    <div class="font-black text-lg text-center bg-gray-100 py-3 rounded border border-gray-300 mb-4">
                        YOU GET IT BACK.<br>
                        <span class="text-green-600">($0 Cost)</span>
                    </div>
                    <p class="text-xs text-center text-red-600 font-bold mb-4">* Limited to first 10 donors</p>

                    <!-- DROP OFF INFO -->
                    <div class="border-t-2 border-dashed border-gray-300 pt-4 mt-4">
                        <div class="text-xs font-bold uppercase text-gray-500 mb-2">Drop-Off Location</div>
                        <div class="flex items-center gap-3 text-carbon font-bold">
                            <i class="fas fa-map-marker-alt text-red-500"></i>
                            <span>ATTENDANCE OFFICE</span>
                        </div>
                        <div class="flex items-center gap-3 text-carbon font-bold mt-2">
                            <i class="fas fa-envelope text-blue-500"></i>
                            <a href="mailto:aryanchandna@gmail.com" class="hover:underline">aryanchandna@gmail.com</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lg:w-2/3">
                <h3 class="text-2xl font-bold mb-6 text-carbon border-b-2 border-carbon pb-2">Research Milestones</h3>
                <div class="space-y-6">
                    <!-- Milestone 1 -->
                    <div class="flex gap-4 opacity-50">
                        <div class="flex flex-col items-center">
                            <div class="w-8 h-8 bg-carbon text-white rounded-full flex items-center justify-center font-bold text-sm"><i class="fas fa-check"></i></div>
                            <div class="h-full w-1 bg-carbon/20 my-2"></div>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg">Phase 1: Pilot Study (Complete)</h4>
                            <p class="text-sm font-mono">Validated Q4_0 on Snapdragon 625. Established Wake Lock protocol.</p>
                        </div>
                    </div>
                    <!-- Milestone 2 -->
                    <div class="flex gap-4">
                        <div class="flex flex-col items-center">
                            <div class="w-8 h-8 bg-white text-carbon border-4 border-carbon rounded-full flex items-center justify-center font-bold text-sm animate-pulse">2</div>
                            <div class="h-full w-1 bg-carbon/20 my-2"></div>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg">Phase 2: Sourcing & Restoration (Current)</h4>
                            <p class="text-sm font-mono">Collecting 10 devices. Performing hardware triage and repairs.</p>
                        </div>
                    </div>
                    <!-- Milestone 3 -->
                    <div class="flex gap-4 opacity-50">
                        <div class="flex flex-col items-center">
                            <div class="w-8 h-8 bg-white text-gray-400 border-2 border-gray-400 rounded-full flex items-center justify-center font-bold text-sm">3</div>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg text-gray-600">Phase 3: Benchmarking</h4>
                            <p class="text-sm font-mono text-gray-600">Measuring J/t (Joules per Token) and comparing vs. Cloud API.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

</main>

<footer class="bg-carbon text-white py-12 text-center">
    <p class="font-mono text-sm opacity-60 mb-2">Project: The Upcycled Cloud // Est. 2025</p>
    <p class="font-bold">Managed by Aryan Chandna</p>
    <div class="flex justify-center gap-4 mt-4">
        <a href="https://github.com/winexe0" target="_blank" class="text-gray-500 hover:text-white"><i class="fab fa-github"></i> GitHub</a>
        <a href="mailto:aryanchandna@gmail.com" class="text-gray-500 hover:text-white"><i class="fas fa-envelope"></i> Contact</a>
    </div>
</footer>

<!-- LOGIC -->
<script>
    // --- DATA PROCESSING ---
    const dataPoints = 50;
    const labels = Array.from({length: dataPoints}, (_, i) => `${(i * (1.4/dataPoints)).toFixed(2)}h`);

    // Simulating the actual pilot data behavior
    const batteryData = Array.from({length: dataPoints}, (_, i) => 75 - (i * (18/dataPoints)));
    const voltageData = Array.from({length: dataPoints}, (_, i) => 4.27 - (i * ((4.27-3.88)/dataPoints)));
    const currentData = Array.from({length: dataPoints}, (_, i) => {
        if (i < 5) return 0.77;
        return 0.35 + (Math.random() * 0.05);
    });
    const tempData = Array.from({length: dataPoints}, (_, i) => {
        return 26 - (i * ((26-21.5)/dataPoints)) + (Math.random() * 0.5 - 0.25);
    });
    const powerData = voltageData.map((v, i) => v * currentData[i]);

    // --- CHART CONFIG ---
    const ctx = document.getElementById('researchChart').getContext('2d');
    let myChart;

    function initChart() {
        myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Battery Level (%)',
                    data: batteryData,
                    borderColor: '#111',
                    backgroundColor: 'rgba(17,17,17,0.1)',
                    borderWidth: 2,
                    tension: 0.4,
                    fill: true,
                    yAxisID: 'y'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                plugins: {
                    legend: { display: true, position: 'top' },
                    tooltip: {
                        backgroundColor: '#111',
                        titleFont: { family: 'Space Mono' },
                        bodyFont: { family: 'Space Mono' }
                    }
                },
                scales: {
                    y: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        grid: { color: '#f3f4f6' }
                    }
                }
            }
        });
    }

    function updateChart(metric) {
        document.querySelectorAll('.chart-btn').forEach(btn => {
            btn.classList.remove('bg-carbon', 'text-white', 'border-carbon');
            btn.classList.add('text-gray-600', 'border-gray-200', 'bg-white');
        });
        const activeBtn = document.querySelector(`button[onclick="updateChart('${metric}')"]`);
        activeBtn.classList.remove('text-gray-600', 'border-gray-200', 'bg-white');
        activeBtn.classList.add('bg-carbon', 'text-white', 'border-carbon');

        if (metric === 'battery') {
            myChart.data.datasets[0].label = 'Battery Level (%)';
            myChart.data.datasets[0].data = batteryData;
            myChart.data.datasets[0].borderColor = '#111';
            myChart.data.datasets[0].backgroundColor = 'rgba(17,17,17,0.1)';
        } else if (metric === 'power') {
            myChart.data.datasets[0].label = 'Power Consumption (Watts)';
            myChart.data.datasets[0].data = powerData;
            myChart.data.datasets[0].borderColor = '#F4E603';
            myChart.data.datasets[0].backgroundColor = 'rgba(244, 230, 3, 0.2)';
        } else if (metric === 'temp') {
            myChart.data.datasets[0].label = 'Battery Temp (Â°C)';
            myChart.data.datasets[0].data = tempData;
            myChart.data.datasets[0].borderColor = '#3B82F6';
            myChart.data.datasets[0].backgroundColor = 'rgba(59, 130, 246, 0.1)';
        }
        myChart.update();
    }

    // --- HARDWARE LIST ---
    const phones = [
        { name: "Pixel 3 / 3 XL", tier: "tier-a", cpu: "SD 845", status: "Ideal Node" },
        { name: "OnePlus 6T", tier: "tier-a", cpu: "SD 845", status: "Ideal Node" },
        { name: "Poco X3 NFC", tier: "tier-a", cpu: "SD 732G", status: "Good (Mid-Range)" },
        { name: "Pixel 2", tier: "tier-b", cpu: "SD 835", status: "Acceptable" },
        { name: "Galaxy S8", tier: "tier-b", cpu: "SD 835", status: "Acceptable" },
        { name: "Moto G5 Plus", tier: "tier-c", cpu: "SD 625", status: "Legacy (Q4_0 Only)" },
        { name: "Galaxy S7", tier: "tier-c", cpu: "SD 820", status: "Legacy (Q4_0 Only)" },
    ];

    function renderPhones(filter) {
        const container = document.getElementById('phone-grid');
        container.innerHTML = '';
        phones.forEach(phone => {
            if (filter === 'all' || phone.tier === filter) {
                let colorClass = phone.tier === 'tier-a' ? 'border-green-500 bg-green-50' :
                    phone.tier === 'tier-b' ? 'border-yellow-500 bg-yellow-50' :
                        'border-red-500 bg-red-50';
                let tierName = phone.tier === 'tier-a' ? 'Tier A' : phone.tier === 'tier-b' ? 'Tier B' : 'Tier C';
                const card = `
                        <div class="p-4 border-l-4 ${colorClass} rounded shadow-sm hover:shadow-md transition-shadow bg-white">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="font-bold text-lg">${phone.name}</h3>
                                <span class="text-xs font-bold px-2 py-1 rounded bg-white border border-gray-200 uppercase">${tierName}</span>
                            </div>
                            <div class="text-sm text-gray-600 font-mono mb-1">CPU: ${phone.cpu}</div>
                            <div class="text-xs text-gray-500 italic">${phone.status}</div>
                        </div>
                    `;
                container.insertAdjacentHTML('beforeend', card);
            }
        });
    }

    document.getElementById('tier-filters').addEventListener('click', (e) => {
        if (e.target.classList.contains('filter-btn')) {
            document.querySelectorAll('.filter-btn').forEach(b => {
                b.classList.remove('bg-carbon', 'text-white', 'border-carbon');
                b.classList.add('bg-white', 'text-gray-600', 'border-gray-200');
            });
            e.target.classList.remove('bg-white', 'text-gray-600', 'border-gray-200');
            e.target.classList.add('bg-carbon', 'text-white', 'border-carbon');
            renderPhones(e.target.dataset.filter);
        }
    });

    // --- TERMINAL ANIMATION ---
    const termLines = [
        "Initializing Research Protocol...",
        "> Connection established: Moto G5 Plus (Pilot Device)",
        "> Architecture: ARMv8.0 (Legacy)",
        "> Quantization: Q4_0 [FORCED]",
        "> Loading Eco-Logger...",
        "> Wake Lock: ACQUIRED",
        "> Baseline Idle: 0.28 Watts",
        "System ready. Waiting for donor hardware..."
    ];

    async function typeWriter() {
        const container = document.getElementById('terminal-body');
        for (const line of termLines) {
            const p = document.createElement('div');
            p.className = "mb-1";
            p.innerHTML = `<span class="text-gray-500 mr-2">$</span>${line}`;
            container.appendChild(p);
            container.scrollTop = container.scrollHeight;
            await new Promise(r => setTimeout(r, 600));
        }
        const cursor = document.createElement('div');
        cursor.innerHTML = `<span class="text-gray-500 mr-2">$</span><span class="animate-pulse bg-green-400 text-black px-1">_</span>`;
        container.appendChild(cursor);
    }

    window.addEventListener('load', () => {
        initChart();
        renderPhones('all');
        typeWriter();
    });
</script>
</body>
</html>